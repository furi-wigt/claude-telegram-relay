# ============================================================
# Claude Telegram Relay — Environment Variables
# ============================================================
# Copy to .env:  cp .env.example .env
# Then fill in your values below.
# ============================================================

# --- REQUIRED: Telegram ---

# Bot token from @BotFather
TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather

# Your Telegram user ID (from @userinfobot)
TELEGRAM_USER_ID=your_telegram_user_id

# --- REQUIRED: Supabase (persistent memory) ---

# Project URL (looks like https://abc123.supabase.co)
SUPABASE_URL=your_supabase_project_url

# anon public key (starts with eyJ...)
SUPABASE_ANON_KEY=your_supabase_anon_key

# --- RECOMMENDED: Personalization ---

# Your first name
USER_NAME=Your Name

# Your timezone (IANA format: America/New_York, Europe/Berlin, etc.)
USER_TIMEZONE=UTC

# --- OPTIONAL: Paths ---

# Claude CLI path (auto-detected if in PATH)
# CLAUDE_PATH=claude

# Working directory for Claude (defaults to relay's own directory)
# PROJECT_DIR=/path/to/your/project

# Relay data directory (defaults to ~/.claude-relay)
# RELAY_DIR=~/.claude-relay

# Kill the Claude stream if no stdout chunk arrives for this many ms (rolling idle timer).
# Default: 300000 (5 minutes). Increase if Claude regularly pauses > 5 min mid-response.
# CLAUDE_IDLE_TIMEOUT_MS=300000

# Hours after which a Claude --resume session is considered unreliable (server-side expiry).
# When lastActivity exceeds this threshold, shortTermContext is re-injected even if a
# sessionId exists, ensuring Claude is not contextless on a silently-failed resume.
# Default: 4 (hours). Decrease for stricter safety, increase if Anthropic extends session TTL.
# SESSION_RESUME_TTL_HOURS=4

# Notify user via Telegram after Claude has been streaming for this many ms (wall-clock).
# Does NOT kill the stream — user can manually cancel via /cancel or the Cancel button.
# Default: 1800000 (30 minutes).
# CLAUDE_SOFT_CEILING_MS=1800000

# --- OPTIONAL: Voice Transcription ---

# Voice provider: "groq" (free cloud API) or "local" (whisper.cpp on your machine)
# VOICE_PROVIDER=groq

# For Groq: Free API key from console.groq.com
# GROQ_API_KEY=your_groq_key

# For local whisper.cpp:
# WHISPER_BINARY=whisper-cpp
# WHISPER_MODEL_PATH=~/whisper-models/ggml-base.en.bin

# --- OPTIONAL: Obsidian Integration (for ETF analysis notes) ---

# Path to your Obsidian vault (where .md notes are saved)
# Example: /Users/yourname/Documents/ObsidianVault
# OBSIDIAN_VAULT_PATH=/path/to/your/obsidian/vault

# --- OPTIONAL: Artifact Output Path ---

# Base path for agent-generated files (research, docs, security reports)
# Subfolders created automatically: ai-research/, ai-docs/, ai-security/
# Example: ~/Documents/WorkInGovTech/ccbot  or  ~/Documents/jarvis-outputs
# ARTIFACTS_PATH=~/Documents/jarvis-outputs

# --- OPTIONAL: Fallback AI Model ---

# Fallback model when Claude is unavailable (uses Ollama locally)
# Requires Ollama to be installed and running: https://ollama.com
# Popular lightweight models: gemma3-4b, llama3.2:1b, mistral
# FALLBACK_MODEL=gemma3-4b

# Ollama API endpoint (default: http://localhost:11434)
# OLLAMA_API_URL=http://localhost:11434

# --- OPTIONAL: Multi-Agent Group Chat IDs ---

# DEPRECATED: Group chat IDs are now configured in config/agents.json
# These env vars are ignored — set chatId in config/agents.json instead.
#
# GROUP_AWS_CHAT_ID=               # "AWS Cloud Architect" group
# GROUP_SECURITY_CHAT_ID=          # "Security & Compliance" group
# GROUP_DOCS_CHAT_ID=              # "Technical Documentation" group
# GROUP_CODE_CHAT_ID=              # "Code Quality & TDD" group
# GROUP_GENERAL_CHAT_ID=           # "General AI Assistant" group

# --- OPTIONAL: Agentic Coding ---

# Directory for persisted coding session data
# CODING_SESSIONS_DIR=~/.claude-relay/coding-sessions

# Directory for coding session log files
# CODING_LOG_DIR=~/.claude-relay/coding-logs

# Interval (ms) for auto-scanning desktop Claude sessions (0 to disable)
# CODING_AUTO_SCAN_INTERVAL=300000

# Timeout (ms) before idle coding sessions are cleaned up
# CODING_SESSION_TIMEOUT=3600000

# ============================================================
# OBSERVABILITY — Progress indicators for long-running tasks
# ============================================================

# How long to wait before showing a "working..." indicator (ms)
# Default: 8000 (8 seconds) — fast responses won't show the indicator
# PROGRESS_INDICATOR_DELAY_MS=8000

# How often to edit the "working..." indicator message (ms)
# Default: 120000 (2 minutes)
# PROGRESS_UPDATE_INTERVAL_MS=120000

# How often to send a heartbeat update for /code sessions (ms)
# Default: 300000 (5 minutes)
# PROGRESS_HEARTBEAT_INTERVAL_MS=300000

# Telegram forum topic thread_id for routing /code progress details to a topic.
# Per-group: matches each GROUP_*_CHAT_ID above (takes priority over global fallback).
# To find the thread_id: in Telegram desktop, right-click the topic → Copy Link.
#   e.g. https://t.me/c/3481121777/3  →  thread_id is 3
# GROUP_GENERAL_CODING_TOPIC_ID=
# GROUP_AWS_CODING_TOPIC_ID=
# GROUP_SECURITY_CODING_TOPIC_ID=
# GROUP_CODE_CODING_TOPIC_ID=
# GROUP_DOCS_CODING_TOPIC_ID=

# Global fallback — used when no per-group topic is matched (single-chat setups).
# Leave empty to send heartbeats to the main chat instead.
# CODING_TOPIC_ID=
